## 부하 테스트 결과 분석 및 개선 보고서

## 목차

-   [1. 테스트 개요](#1-테스트-개요)
-   [2. 테스트 결과 분석](#2-테스트-결과-분석)
    -   [2.1 상품 주문 API (Peak Load Test)](#21-상품-주문-api-peak-load-test)
    -   [2.2 포인트 충전 API (Load Test)](#22-포인트-충전-api-load-test)
-   [3. 시스템 병목 지점 분석](#3-시스템-병목-지점-분석)
    -   [3.1 상품 주문 시스템 병목](#31-상품-주문-시스템-병목)
    -   [3.2 포인트 충전 시스템 병목](#32-포인트-충전-시스템-병목)
-   [4. 개선 방안](#4-개선-방안)
    -   [4.1 상품 주문 API 개선](#41-상품-주문-api-개선)
-   [5. 장애 대응 계획](#5-장애-대응-계획)
-   [6. 결론 및 권장사항](#6-결론-및-권장사항)

### 1. 테스트 개요

-   해당 테스트들은 특가 이벤트, 블랙프라이데이와 같은 트래픽 급증 상황을 대비하여 시스템의 성능과 안정성을 평가하기 위해 진행되었습니다. 두 가지 주요 API에 대한 부하 테스트를 실시하였습니다.

### 2. 테스트 결과 분석

**2.1 상품 주문 API (Peak Load Test)**

-   결과 지표

```
    - 성공률: 89.47% (57개 요청 중 51개 성공, 6개 실패)
    - 평균 응답 시간: 456.97ms
    - 중간값 응답 시간: 24.92ms
    - 최대 응답 시간: 3.29초
    - p90 응답 시간: 2.45초
    - p95 응답 시간: 2.69초
    - 초당 처리량: 약 2.76 요청/초
```

-   분석
    -   응답 시간의 편차가 매우 큼 (2.21ms ~ 3.29초)
    -   부하가 급증하는 구간(50 VU)에서 일부 요청 처리 실패
    -   중간값 응답 시간(24.92ms)은 양호하나 p90, p95 값이 매우 높아 일부 요청에서 심각한 지연 발생

**2.2 포인트 충전 API (Load Test)**

-   결과 지표

```
    -   성공률: 100% (모든 요청 성공)
    -   평균 응답 시간: 52.69ms
    -   중간값 응답 시간: 43.72ms
    -   최대 응답 시간: 129.67ms
    -   p90 응답 시간: 101.69ms
    -   p95 응답 시간: 113.63ms
    -   초당 처리량: 약 9.49 요청/초
```

-   분석
    -   모든 요청이 성공적으로 처리됨
    -   응답 시간이 안정적이고 예측 가능함
    -   최대 응답 시간도 130ms 미만으로 양호

### 3. 시스템 병목 지점 분석

**3.1 상품 주문 시스템 병목**

-   데이터베이스 병목:
    -   주문 생성 시 트랜잭션 처리 과정에서 지연 발생
    -   주문 급증 시 데이터베이스 락(lock) 경합 발생
-   동시성 처리 문제:
    -   다수 사용자가 동시에 같은 상품을 주문할 때 재고 확인 및 업데이트 과정에서 경합 조건 발생
-   리소스 제한:
    -   피크 부하 시점(50 VU)에서 메모리 사용량 급증

**3.2 포인트 충전 시스템 병목**

-   포인트 충전 API는 상대적으로 안정적이며 병목 현상이 두드러지지 않습니다.

### 4. 개선 방안

**4.1 상품 주문 API 개선**

-   데이터베이스 최적화: 주문 관련 테이블에 적절한 인덱스 추가
-   캐시 도입:
    -   Redis를 활용한 상품 정보 및 재고 정보 캐싱
    -   읽기 작업을 캐시에서 처리하여 DB 부하 감소
-   데이터베이스 파티셔닝/샤딩:
    -   주문 데이터를 사용자 ID 또는 날짜 기준으로 파티셔닝
    -   대규모 데이터 처리 성능 향상

### 5. 장애 대응 계획

-   Prometheus + Grafana 기반 실시간 모니터링 시스템 구축
-   주요 지표: API 응답 시간, 오류율, DB 커넥션 수, CPU/메모리 사용량
-   임계치 초과 시 알림 설정 (Slack, Email)

### 6. 결론 및 권장사항

-   상품 주문 API 개선 필요성 높음:
    -   부하 테스트 결과, 피크 부하 상황에서 약 10%의 요청 실패와 높은 지연 시간 발생
    -   데이터베이스 최적화와 동시성 관리 개선이 시급
-   포인트 충전 API는 현재 안정적:
    -   더 높은 부하에서의 추가 테스트 권장
